(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(38)},29:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),l=a(3),s=a(4),u=a.n(s),i=a(11),h=a(5),m=a(6),f=a(8),d=a(7),b=a(9),v=a(16),p="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var g={Accept:"application/json",Authorization:k},E=function(){return fetch("".concat(p,"/books"),{headers:g}).then(function(e){return e.json()}).then(function(e){return e.books})},S=function(e,t){return fetch("".concat(p,"/books/").concat(e.id),{method:"PUT",headers:Object(v.a)({},g,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},y=function(e){return fetch("".concat(p,"/search"),{method:"POST",headers:Object(v.a)({},g,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},R=a(13),N=(a(29),function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={searchTerm:""},a.search=function(e){var t=e.target.value.trimStart();a.setState(function(){return{searchTerm:t}}),""!==t?a.props.searchSubmit(t):(""===t||t.length<=0)&&a.props.clearSearch(t)},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"search-books-input-wrapper"},r.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:this.state.searchTerm,onChange:this.search}))}}]),t}(r.a.Component)),j=function(e){return r.a.createElement("div",{className:"book-shelf-changer"},r.a.createElement("select",{value:e.result.shelf,onChange:function(t){var a=t.target.value;e.changeShelfSearch(e.result,a)}},r.a.createElement("option",{value:"move",disabled:!0},"Move to..."),r.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),r.a.createElement("option",{value:"wantToRead"},"Want to Read"),r.a.createElement("option",{value:"read"},"Read"),r.a.createElement("option",{value:"none"},"None")))},O=function(e){return r.a.createElement("li",null,r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},r.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(e.imageURL,'")')}}),r.a.createElement(j,{books:e.books,result:e.result,changeShelfSearch:e.changeShelfSearch})),r.a.createElement("div",{className:"book-title"},e.title),r.a.createElement("div",{className:"book-authors"},e.author)))},w=function(e){return r.a.createElement("div",{className:e.className},r.a.createElement("ol",{className:"books-grid"},e.searchResult.length>0?e.searchResult.map(function(t){return r.a.createElement(O,{key:t.id,title:t.title,author:t.authors&&t.authors.join(", "),imageURL:t.imageLinks&&t.imageLinks.thumbnail,shelf:t.shelf,books:e.books,result:t,changeShelfSearch:e.changeShelfSearch})}):r.a.createElement("p",null,e.errorMessage)))},L=function(){return r.a.createElement(l.b,{to:"/"},r.a.createElement("button",{className:"close-search"},"Close"))},C=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={searchResult:[],error:void 0},a.searchSubmit=function(){var e=Object(i.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:"empty query"!==(n=e.sent).error?(n.forEach(function(e){return e.shelf="none"}),n.forEach(function(e){return a.props.books.map(function(t){return e.id===t.id&&(e.shelf=t.shelf),t}),e}),a.setState(function(){return{searchResult:n}})):a.setState(function(){return{error:"No results please try another search term",searchResult:[]}});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.clearSearch=function(e){a.setState(function(){return{searchResult:[],error:void 0}})},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"search-books"},r.a.createElement("div",{className:"search-books-bar"},r.a.createElement(L,null),r.a.createElement(N,{searchSubmit:this.searchSubmit,clearSearch:this.clearSearch})),r.a.createElement(w,{className:"search-books-results",searchResult:this.state.searchResult,books:this.props.books,changeShelfSearch:this.props.changeShelfSearch,errorMessage:this.state.error}))}}]),t}(r.a.Component),x=function(e){return r.a.createElement("div",{className:"book-shelf-changer"},r.a.createElement("select",{value:e.shelf,onChange:function(t){var a=t.target.value;e.changeShelf(e.book,a)}},r.a.createElement("option",{value:"move",disabled:!0},"Move to..."),r.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),r.a.createElement("option",{value:"wantToRead"},"Want to Read"),r.a.createElement("option",{value:"read"},"Read"),r.a.createElement("option",{value:"none"},"None")))},T=function(e){return r.a.createElement("li",null,r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},r.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(e.imageURL,'")')}}),r.a.createElement(x,{shelf:e.shelf,changeShelf:e.changeShelf,book:e.book})),r.a.createElement("div",{className:"book-title"},e.title),r.a.createElement("div",{className:"book-authors"},e.author)))},B=function(e){var t;return void 0!==e.currentlyReading?t=e.currentlyReading.map(function(t){return r.a.createElement(T,{key:t.id,title:t.title,author:t.authors&&t.authors,imageURL:t.imageLinks&&t.imageLinks.thumbnail,shelf:t.shelf,changeShelf:e.changeShelf,book:t})}):void 0!==e.futureReads?t=e.futureReads.map(function(t){return r.a.createElement(T,{key:t.id,title:t.title,author:t.authors&&t.authors,imageURL:t.imageLinks&&t.imageLinks.thumbnail,shelf:t.shelf,changeShelf:e.changeShelf,book:t})}):void 0!==e.previousReads&&(t=e.previousReads.map(function(t){return r.a.createElement(T,{key:t.id,title:t.title,author:t.authors&&t.authors,imageURL:t.imageLinks&&t.imageLinks.thumbnail,shelf:t.shelf,changeShelf:e.changeShelf,book:t})})),r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("ol",{className:"books-grid"},t))},M=function(e){var t=e.currentBooks,a=e.changeShelf,n=e.title;return r.a.createElement("div",null,r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},n),r.a.createElement(B,{currentlyReading:t,changeShelf:a})))},U=function(e){var t=e.futureBooks,a=e.changeShelf,n=e.title;return r.a.createElement("div",null,r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},n),r.a.createElement(B,{futureReads:t,changeShelf:a})))},A=function(e){var t=e.previousBooks,a=e.changeShelf,n=e.title;return r.a.createElement("div",null,r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},n),r.a.createElement(B,{previousReads:t,changeShelf:a})))},J=function(){return r.a.createElement("div",{className:"list-books-title"},r.a.createElement("h1",null,"MyReads"))},W=function(){return r.a.createElement("div",{className:"open-search"},r.a.createElement(l.b,{to:"/search"},r.a.createElement("button",null,"Add a book")))},I=function(e){var t=e.books.filter(function(e){return"currentlyReading"===e.shelf}),a=e.books.filter(function(e){return"wantToRead"===e.shelf}),n=e.books.filter(function(e){return"read"===e.shelf});return r.a.createElement("div",{className:"list-books"},r.a.createElement(J,null),r.a.createElement("div",{className:"list-books-content"},r.a.createElement(M,{currentBooks:t,changeShelf:e.changeShelf,title:"Currently Reading"}),r.a.createElement(U,{futureBooks:a,changeShelf:e.changeShelf,title:"Want to Read"}),r.a.createElement(A,{previousBooks:n,changeShelf:e.changeShelf,title:"Read"})),r.a.createElement(W,null))},P=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"404"),r.a.createElement("p",null,"Page not Found",r.a.createElement(l.b,{to:"/"}," Go Home")))},q=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={books:[]},a.changeShelf=function(){var e=Object(i.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t,n);case 2:return e.next=4,E();case 4:r=e.sent,a.setState(function(){return{books:r}});case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){var e=Object(i.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:t=e.sent,this.setState(function(){return{books:t}});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app"},r.a.createElement(R.c,null,r.a.createElement(R.a,{path:"/",exact:!0,render:function(){return r.a.createElement(I,{books:e.state.books,changeShelf:e.changeShelf})}}),r.a.createElement(R.a,{path:"/search",exact:!0,render:function(){return r.a.createElement(C,{books:e.state.books,changeShelfSearch:e.changeShelf})}}),r.a.createElement(R.a,{component:P})))}}]),t}(r.a.Component);a(36);c.a.render(r.a.createElement(l.a,null,r.a.createElement(q,null)),document.getElementById("root"))}},[[22,2,1]]]);
//# sourceMappingURL=main.42c15845.chunk.js.map